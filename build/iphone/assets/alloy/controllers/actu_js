function __processArg(t,e){var i=null;return t&&(i=t[e]||null,delete t[e]),i}function Controller(){function t(t,e,r){r="undefined"!=typeof r?r:"new";var o=Ti.Network.createHTTPClient({timeout:5e3}),h={offset:t,number:e,os:mobile_info.name,mobile:mobile_info.ip};console.log(h),l&&(o.ontimeout=function(){console.error("The request for "+URL_APPLI+"actu/get timed out.")},o.onload=function(){var t=JSON.parse(this.responseText);console.log(JSON.stringify(t)),console.log(JSON.stringify(s));var e=t.actu,o=t.ads;if(""!=o&&Ti.App.Properties.setString("adsense",o),!0===t.status){var h=[];for(i in e){var c=e[i].title;if(c.length>NB_CARACT+3)var _=e[i].title,p=_.substring(0,NB_CARACT-3)+"...";else var p=c;if(0!==e[i].nbre){var f=e[i].img.link+e[i].img.size+"."+e[i].img.extension,g=e[i].post_date,v=Titanium.UI.createTableViewRow({top:5,backgroundColor:BACKGROUND_TABLEVIEW,selectedBackgroundColor:"transparent"}),m=Titanium.UI.createView({height:150,layout:"vertical",backgroundColor:BACKGOUND_VIEW,borderRadius:3,right:5,left:5,height:76,shadow:{shadowRadius:3,shadowOpacity:1,shadowOffset:{x:20,y:20},shadowColor:BACKGROUND_VIEW_SHADOW}}),w=Titanium.UI.createImageView({top:3,bottom:3,borderRadius:2,left:3,right:3,height:70,width:93,image:f});m.add(w);var T=Titanium.UI.createLabel({text:p,left:103,top:-75,color:"#999",bottom:2,right:5,height:50,font:{fontFamily:FONT,fontSize:13}});m.add(T);var I=Titanium.UI.createView({width:"auto",height:15,left:100,top:0});m.add(I);var y=Titanium.UI.createImageView({left:3,height:12,width:12,image:"images/clock.png"});I.add(y);var A=Titanium.UI.createLabel({left:18,text:beautifulDate(g,d,u),textAlign:"left",color:"#6A819E",font:{fontSize:12,fontStyle:"italic"}});I.add(A),v.add(m),v.className="item"+i,v.id=e[i].id,h[i]=v}}return"update"===r?n.table_actu.appendRow(h):(n.table_actu.setData(h),a=0),l=t.nbre>0?!0:!1,showLoading&&(Alloy.Globals.loading.hide(),showLoading=!1),t.status}return!1},o.open("POST",URL_APPLI+"actu/get",!0),o.send(h),console.log("POST"))}function e(){f=!0,setTimeout(r,2e3)}function r(){f=!1,t(a,15,"update")}require("alloy/controllers/BaseController").apply(this,Array.prototype.slice.call(arguments)),this.__controllerPath="actu",this.args=arguments[0]||{},arguments[0]&&(__processArg(arguments[0],"__parentSymbol"),__processArg(arguments[0],"$model"),__processArg(arguments[0],"__itemTemplate"));var n=this,o={};n.__views.__alloyId0=Ti.UI.createWindow({backgroundColor:"#262626",barImage:"images/background_title.png",id:"__alloyId0"}),n.__views.__alloyId2=Ti.UI.createLabel({width:Ti.UI.SIZE,height:Ti.UI.SIZE,color:"#FFF",font:{fontSize:20,fontFamily:"Helvetica Neue"},textAlign:"center",text:"ActualitÃ©",id:"__alloyId2"}),n.__views.__alloyId0.titleControl=n.__views.__alloyId2,n.__views.btnInfo=Ti.UI.createImageView({data:"",id:"btnInfo",image:"images/info.png",width:25,height:25}),n.__views.__alloyId0.rightNavButton=n.__views.btnInfo,n.__views.table_actu=Ti.UI.createTableView({backgroundColor:"#333333",zIndex:999,id:"table_actu",separatorColor:"transparent"}),n.__views.__alloyId0.add(n.__views.table_actu),n.__views.actu=Ti.UI.iOS.createNavigationWindow({window:n.__views.__alloyId0,id:"actu"}),n.__views.actu&&n.addTopLevelView(n.__views.actu),o.destroy=function(){},_.extend(n,n.__views);var s=require("ti.admob");n.actu;var a=0,l=!0,h="",d=new Date;d.setHours(0,0,0,0);var u=new Date;u.setHours(0,0,0,0),u.setDate(u.getDate()-1),n.actu.open({transition:Titanium.UI.iPhone.AnimationStyle.FLIP_FROM_LEFT}),n.table_actu.separatorColor="transparent",n.table_actu.setHeaderTitle="Hello",Alloy.Globals.loading.show("Chargement des news...",!1),showLoading=!0,console.log("adds");var c=s.createView({bottom:0,left:0,width:320,height:50,adBackgroundColor:"pink",adUnitId:"ca-app-pub-4366233206286319/8369007641",testDevices:["bacfcf6f44551061b437b4b7e63e85e4"]});n.actu.add(c),c.hide(),console.log("fin adds"),t(0,15);var p=Ti.UI.createRefreshControl({tintColor:"white"});n.table_actu.setRefreshControl(p),p.addEventListener("refreshstart",function(){a=0,h=t(a,15),p.endRefreshing()});var f=!1,g=0;n.table_actu.addEventListener("scroll",function(t){var i=t.contentOffset.y,r=t.size.height,n=i+r,o=t.contentSize.height,s=o-n;if(g>s){var h=.9*o;!f&&n>=h&&(!showLoading&&l&&(Alloy.Globals.loading.show("Chargement...",!1),showLoading=!0),e(),a+=15)}g=s}),n.table_actu.addEventListener("click",function(t){var e=Alloy.createController("news",t.rowData.id);e.getView().open({animated:!0})}),n.btnInfo.addEventListener("click",function(){var t=Alloy.createController("info");t.getView().open()}),_.extend(n,o)}var Alloy=require("alloy"),Backbone=Alloy.Backbone,_=Alloy._;module.exports=Controller;