function __processArg(e,t){var i=null;return e&&(i=e[t]||null,delete e[t]),i}function Controller(){function e(e,t){var i=t||"undefined"==typeof t?"<br />":"<br>";return(e+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1"+i+"$2")}function t(e){l.onload=function(){console.log(JSON.parse(this.responseText))},l.open("POST",URL_APPLI+"appli/share/index"),l.send(e)}function i(){type="undefined"!=typeof type?type:"new",l=Ti.Network.createHTTPClient();var i={id:s,os:mobile_info.os,mobile:mobile_info.ip};l.onload=function(){var i=JSON.parse(this.responseText);if(1==i.image.retina)var r=i.image.url+"@2x."+i.image.extension;else var r=i.image.url+"."+i.image.extension;console.log(r),i.content=i.content.replace(/<a /gi,"<a onClick=\"Ti.App.fireEvent( 'webViewClick', { URL: this.href } ); return false;\" "),i.content=i.content.replace('src="//','src="http://'),i.content=i.content.replace('src="//platform.twitter.com/widgets.js','src="http://platform.twitter.com/widgets.js'),console.log(i.content);var n='<!DOCTYPE html><html lang="fr"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><style>html, body {height:100%;max-width:100%;}iframe {max-width:100%} .contenu img{width:100%;height:auto;max-width:100%;}a:link{color:#6A819E;text-decoration:none;}a:visited{color:#6A819E;text-decoration:none;}a:hover{color:#6A819E;text-decoration:none;}a:active{color:#6A819E;text-decoration:none;}</style></head><body>';n=n+'<h1 style="font-size : 18px;color:#FFF;text-align:center;">'+i.title+'</h1><div style="width:100%;margin-bottom:15px;line-height:15px">',n=n+'<img style="display:block;margin-left:auto;margin-right:auto;" src="'+r+'"  width="90%" /></div>',n=n+'<div class="contenu" style="color:#FFF; font-size:15px">'+e(i.content,void 0)+"</div></body></html>",o.contenu.html=n,Titanium.UI.createImageView({left:0,height:12,width:12,image:"images/comment.png"}),o.imageShare.addEventListener("click",function(){var e=require("ma.car.ti.module.share");e.share({text:i.title+"\n"+i.link,facebook:i.title+"\n"+i.link,twitter:i.title+"\n"+i.link,callback:function(e){"SUCCESS"===e.state&&(t({type:e.platform,id:i.id,username:mobile_info.username,ip:mobile_info.ip,version:mobile_info.version}),alert("Merci d'avoir partag√© notre article !"))}})})},l.open("POST",URL_APPLI+"actu/getNews",!0),l.send(i)}require("alloy/controllers/BaseController").apply(this,Array.prototype.slice.call(arguments)),this.__controllerPath="news",this.args=arguments[0]||{},arguments[0]&&(__processArg(arguments[0],"__parentSymbol"),__processArg(arguments[0],"$model"),__processArg(arguments[0],"__itemTemplate"));var o=this,r={};o.__views.__alloyId9=Ti.UI.createWindow({backgroundColor:"#262626",barImage:"images/background_title.png",tintColor:"white",id:"__alloyId9"}),o.__views.__alloyId10=Ti.UI.createLabel({color:"#FFF",text:"News",id:"__alloyId10"}),o.__views.__alloyId9.titleControl=o.__views.__alloyId10,o.__views.menuButton=Ti.UI.createLabel({tintColor:"#FFF",id:"menuButton",text:"< Retour",color:"#FFF"}),o.__views.__alloyId9.leftNavButton=o.__views.menuButton,o.__views.imageShare=Ti.UI.createImageView({image:"images/share.png",id:"imageShare",width:30,height:30}),o.__views.__alloyId9.rightNavButton=o.__views.imageShare,o.__views.__alloyId13=Ti.UI.createScrollView({backgroundColor:"#262626",layout:"vertical",showVerticalScrollIndicator:!0,contentWidth:"100%",showHorizontalScrollIndicator:!1,id:"__alloyId13"}),o.__views.__alloyId9.add(o.__views.__alloyId13),o.__views.contenu=Ti.UI.createWebView({id:"contenu",height:"100%",html:"",disableBounce:!1,backgroundColor:"transparent"}),o.__views.__alloyId13.add(o.__views.contenu),o.__views.news=Ti.UI.iOS.createNavigationWindow({window:o.__views.__alloyId9,id:"news"}),o.__views.news&&o.addTopLevelView(o.__views.news),r.destroy=function(){},_.extend(o,o.__views);var n=require("ti.admob"),a=arguments[0]||{},s=a,l=Ti.Network.createHTTPClient(),d={};o.menuButton.addEventListener("click",function(){o.news.close()}),i(s);var c=Titanium.UI.createWebView({backgroundColor:"black"}),u=Titanium.UI.createWindow({backgroundColor:"blue",translucent:!0,navGroup:!0,tintColor:"white",statusBarStyle:Ti.UI.iPhone.StatusBar.LIGHT_CONTENT,barImage:"images/background_title.png"});console.log("adds");var h=n.createView({bottom:0,left:0,width:320,height:50,adBackgroundColor:"pink",adUnitId:"ca-app-pub-4366233206286319/8369007641",testDevices:["bacfcf6f44551061b437b4b7e63e85e4"]});u.add(h),h.hide(),console.log("fin adds"),Ti.App.addEventListener("webViewClick",function(e){d=Titanium.UI.iOS.createNavigationWindow({window:o.news}),c.setUrl(e.URL),u.add(c),o.news.openWindow(u,{animated:!0})}),c.addEventListener("load",function(){u.title=c.evalJS("document.title")}),_.extend(o,r)}var Alloy=require("alloy"),Backbone=Alloy.Backbone,_=Alloy._;module.exports=Controller;